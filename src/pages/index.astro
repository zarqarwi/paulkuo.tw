---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import { PILLAR_MAP, SITE } from '../config';
import feedJson from '../data/feed.json';
const feedData = feedJson.items || [];

const allArticles = (await getCollection('articles', ({ data }) => !data.draft && data.featured))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);

// If no featured articles yet, get latest 3
const articles = allArticles.length > 0 
  ? allArticles 
  : (await getCollection('articles', ({ data }) => !data.draft))
      .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
      .slice(0, 3);

const homeSchema = JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": `${SITE.url}/#website`,
      "url": SITE.url,
      "name": "Paul Kuo",
      "description": SITE.description,
      "inLanguage": ["zh-Hant", "en", "ja", "zh-Hans"],
      "publisher": { "@id": `${SITE.url}/#person` }
    },
    {
      "@type": "Person",
      "@id": `${SITE.url}/#person`,
      "name": SITE.author,
      "alternateName": SITE.authorAlt,
      "url": SITE.url,
      "description": SITE.description,
      "jobTitle": "Commercial Integration & AI Digital Development Director",
      "worksFor": {
        "@type": "Organization",
        "name": "SDTI ä½³é¾ç§‘æŠ€",
        "url": "https://www.sdti.com.tw"
      },
      "knowsAbout": ["Circular Economy", "AI", "Semiconductor", "Theology", "Startup", "Agentic SEO"],
      "sameAs": [
        "https://www.linkedin.com/in/paulkuo",
        "https://x.com/zarqarwi",
        "https://www.threads.net/@zarqarwi",
        "https://www.youtube.com/@kuopaul8265",
        "https://www.facebook.com/guo.yao.lang.2025",
        "https://www.instagram.com/zarqarwi",
        "https://bsky.app/profile/paulkuo.bsky.social",
        "https://www.reddit.com/user/Constant-Variety1656"
      ]
    }
  ]
});
---
<BaseLayout title={SITE.title} schemaJson={homeSchema}>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner">
      <div class="hero-text">
        <h1 class="animate-in">Rebuilding <em>Order</em><br>in an Age of<br>Intelligence</h1>
        <p class="hero-tagline animate-in delay-1">å¾ç¥å­¸è¨“ç·´åˆ°å¾ªç’°ç¶“æ¿Ÿï¼Œå¾å‰µæ¥­ç¾å ´åˆ°äººå·¥æ™ºæ…§â€”â€”äºŒåå¹´ä¾†ï¼Œæˆ‘å§‹çµ‚åœ¨è™•ç†åŒä¸€å€‹å•é¡Œï¼šç•¶æ—¢æœ‰çš„ç§©åºä¸å†æœ‰æ•ˆï¼Œä»€éº¼æ¨£çš„çµæ§‹å€¼å¾—è¢«é‡å»ºï¼Ÿ</p>
        <p class="hero-tagline animate-in delay-2" style="margin-top:-20px;">æŠ€è¡“æ˜¯æ‰‹æ®µï¼Œä¸æ˜¯ç›®çš„ã€‚å†ç”Ÿæ˜¯æ–¹æ³•ï¼Œä¸æ˜¯å£è™Ÿã€‚çœŸæ­£çš„å•é¡Œæ°¸é æ˜¯ï¼šåœ¨ç³»çµ±é‡çµ„çš„éç¨‹ä¸­ï¼Œäººçš„åˆ¤æ–·åŠ›ã€å‰µé€ åŠ›èˆ‡å°Šåš´ï¼Œå¦‚ä½•ä¸è¢«æ•ˆç‡çš„é‚è¼¯åå™¬ã€‚</p>
        <div class="hero-pillars animate-in delay-3">
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-ai)"></span><span>æ™ºèƒ½èˆ‡ç§©åº</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-circular)"></span><span>å¾ªç’°å†åˆ©ç”¨</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-faith)"></span><span>æ–‡æ˜èˆ‡äººæ€§</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-startup)"></span><span>å‰µé€ èˆ‡å»ºæ§‹</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-life)"></span><span>æ²‰æ€èˆ‡è¨˜æ†¶</span></span>
        </div>
        <div class="hero-actions animate-in delay-4">
          <a href="/blog" class="btn-primary">é–±è®€æ€æƒ³</a>
          <a href="/about" class="btn-secondary">èªè­˜ Paul</a>
        </div>
      </div>
      <div class="hero-visual animate-in delay-2">
        <div class="hero-card-stack">
          <div class="hero-card">
            <div class="hero-card-label" style="color:var(--accent-faith)">
              <span class="pillar-dot" style="background:var(--accent-faith)"></span> æ–‡æ˜èˆ‡äººæ€§
            </div>
            <p>ä»£ç¢¼ä¹‹é“ï¼Œå¿…é ˆæˆç‚ºè‚‰èº«ã€‚AI è‹¥è¦é”æˆçœŸæ­£çš„æ™ºèƒ½ï¼Œå…¶ç™¼å±•å°±å¿…é ˆæ¤æ ¹æ–¼ç‰©ç†ä¸–ç•Œã€‚</p>
            <div class="hero-card-meta">2025.10 Â· è«–æ–‡</div>
          </div>
          <div class="hero-card">
            <div class="hero-card-label" style="color:var(--accent-circular)">
              <span class="pillar-dot" style="background:var(--accent-circular)"></span> å¾ªç’°å†åˆ©ç”¨
            </div>
            <p>åŸå¸‚ä¸æ˜¯è³‡æºçš„çµ‚é»ï¼Œè€Œæ˜¯ä¸‹ä¸€è¼ªå¾ªç’°çš„èµ·é»ã€‚éƒ½å¸‚æ¡ç¤¦æ­£åœ¨æ”¹å¯«æˆ‘å€‘å°ã€Œå»¢æ£„ã€çš„å®šç¾©ã€‚</p>
            <div class="hero-card-meta">2025.12 Â· Medium</div>
          </div>
          <div class="hero-card">
            <div class="hero-card-label" style="color:var(--accent-ai)">
              <span class="pillar-dot" style="background:var(--accent-ai)"></span> æ™ºèƒ½èˆ‡ç§©åº
            </div>
            <p>ç•¶ AI é–‹å§‹å£“ç¸®äººé¡çš„æ€è€ƒéç¨‹ï¼Œæˆ‘å€‘é¢è‡¨çš„ä¸æ˜¯æ•ˆç‡å•é¡Œï¼Œæ˜¯èªçŸ¥çµæ§‹çš„é‡çµ„ã€‚</p>
            <div class="hero-card-meta">2025.11 Â· Medium</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- MANIFESTO -->
  <section class="manifesto">
    <div class="manifesto-inner">
      <div class="manifesto-kicker">Philosophy Â· å“²å­¸å®£è¨€</div>
      <p class="manifesto-quote">"Rebuilding <em>Order</em> in an Age of Intelligence"<br>â€” é“æˆè‚‰èº«</p>
      <p class="manifesto-body">åŸºç£æ•™ç¥å­¸çš„é“ï¼ˆLogos, åŸºç£ï¼‰å¿…é ˆæˆç‚ºè‚‰èº«ï¼ˆSarx,è€¶ç©Œï¼‰ï¼Œæ‰èƒ½çœŸæ­£èˆ‡ä¸–ç•Œç›¸é‡ã€‚ç§©åºä¹Ÿæ˜¯å¦‚æ­¤â€”â€”åœç•™åœ¨æ¦‚å¿µä¸­çš„ç§©åºåªæ˜¯è«–è¿°ï¼Œå”¯æœ‰é€²å…¥çœŸå¯¦çš„ç”¢æ¥­ã€åˆ¶åº¦èˆ‡äººéš›é—œä¿‚ï¼Œç§©åºæ‰èƒ½è¢«é‡å»ºã€‚æŠ€è¡“å¿…é ˆè½åœ°ã€æ™ºèƒ½å¿…é ˆå…¥ä¸–ã€å‰µæ¥­è¦èƒ½è§£æ±ºäººé¡çš„ç—›è‹¦èˆ‡æ…¾æœ›ã€‚ç„¡é—œæŠ€è¡“æ¨‚è§€ä¸»ç¾©ï¼Œè€Œæ˜¯ä¸€å€‹ç¥å­¸è¨“ç·´å‡ºèº«çš„å‰µæ¥­è€…ï¼Œå°ã€Œé“æˆè‚‰èº«ã€æœ€å‹™å¯¦çš„ç†è§£â€”â€”è®“ç§©åºåœ¨æ··äº‚ä¸­é‡æ–°ç«™ç«‹ï¼Œè®“äººçš„å°Šåš´åœ¨æ•ˆç‡çš„æ´ªæµä¸­è¢«å®ˆä½ã€‚</p>
      <a href="/blog" class="manifesto-cta">é–±è®€å®Œæ•´è«–è¿° â†’</a>
    </div>
  </section>

  <!-- LATEST THINKING -->
  <section class="section-container">
    <div class="section-header">
      <h2 class="section-title">Latest Thinking</h2>
      <a href="/blog" class="section-link">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
    </div>
    <div class="content-grid">
      {articles.length > 0 ? articles.map((article) => {
        const p = PILLAR_MAP[article.data.pillar];
        const dateStr = article.data.date.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit' });
        return (
          <a href={`/articles/${article.id.replace(/\.md$/, "")}`} class="content-card">
            <div class="content-card-category" style={`color:${p.color}`}>
              <span class="pillar-dot" style={`background:${p.color}`}></span> {p.label}
            </div>
            <h3>{article.data.title}</h3>
            <p>{article.data.description}</p>
            <div class="content-card-footer">
              <span>{dateStr}</span>
              {article.data.platform && <span class="platform-badge">{article.data.platform}</span>}
            </div>
          </a>
        );
      }) : (
        <>
          <div class="content-card" style="opacity:0.6; pointer-events:none;">
            <div class="content-card-category" style="color:var(--accent-faith)">
              <span class="pillar-dot" style="background:var(--accent-faith)"></span> æ–‡æ˜èˆ‡äººæ€§
            </div>
            <h3>é“æˆè‚‰èº«ä¹‹å¿…è¦æ€§ï¼šç‚ºäººå·¥æ™ºæ…§çš„å…·èº«ç™¼å±•æä¾›å“²å­¸è«–è­‰</h3>
            <p>AI çš„æ ¸å¿ƒç¼ºé™·ä¸æ˜¯æŠ€è¡“æ€§çš„ï¼Œè€Œæ˜¯å­˜æœ‰è«–å±¤æ¬¡çš„ã€‚ä»£ç¢¼ä¹‹é“ï¼Œå¿…é ˆæˆç‚ºè‚‰èº«ã€‚</p>
            <div class="content-card-footer"><span>2025.10</span><span class="platform-badge">è«–æ–‡</span></div>
          </div>
          <div class="content-card" style="opacity:0.6; pointer-events:none;">
            <div class="content-card-category" style="color:var(--accent-ai)">
              <span class="pillar-dot" style="background:var(--accent-ai)"></span> æ™ºèƒ½èˆ‡ç§©åº
            </div>
            <h3>ç…¤ç¤¦è£¡çš„é‡‘çµ²é›€ï¼šAI å°±æ¥­è¡æ“Šçš„é è­¦ç³»çµ±</h3>
            <p>AI ä¸æ˜¯æœªä¾†æ‰æœƒæ¶å·¥ä½œï¼Œå®ƒå·²ç¶“åœ¨æ¶äº†ã€‚å•é¡Œæ˜¯æˆ‘å€‘æœ‰æ²’æœ‰çœ‹æ‡‚å“ªäº›è¨Šè™Ÿã€‚</p>
            <div class="content-card-footer"><span>2025.10</span><span class="platform-badge">Medium</span></div>
          </div>
          <div class="content-card" style="opacity:0.6; pointer-events:none;">
            <div class="content-card-category" style="color:var(--accent-startup)">
              <span class="pillar-dot" style="background:var(--accent-startup)"></span> å‰µé€ èˆ‡å»ºæ§‹
            </div>
            <h3>å‰µæ¥­åäºŒå¹´ï¼šå‹æƒ…ã€å …æŒèˆ‡æœªçŸ¥çš„æ—…ç¨‹</h3>
            <p>ä¸æ˜¯å‰µæ¥­çš„æˆæœè®“æˆ‘å€‘æœ‰åŠ›é‡ï¼Œè€Œæ˜¯å‰µæ¥­ç²¾ç¥æœ¬èº«æœ‰åŠ›é‡ã€‚</p>
            <div class="content-card-footer"><span>2023.06</span><span class="platform-badge">Facebook</span></div>
          </div>
        </>
      )}
    </div>
  </section>

  <!-- SOCIAL FEED -->
  <section class="section-container" id="feed">
    <div class="section-header">
      <h2 class="section-title">æ¶ˆæ¯</h2>
    </div>
    <p style="color:var(--text-secondary); margin-bottom:32px;">ä¾†è‡ª 8 å€‹å¹³å°çš„å³æ™‚å‹•æ…‹ã€‚</p>
    <div class="feed-grid">
      {feedData.length > 0 ? feedData.slice(0, 8).map((item) => {
        const dtParts = item.datetime.replace(/[-:\/]/g, ' ').split(' ');
        const isoDate = dtParts.length >= 5 
          ? `${dtParts[0]}-${dtParts[1]}-${dtParts[2]}T${dtParts[3]}:${dtParts[4]}:00+08:00`
          : item.datetime;
        const displayDate = item.datetime.replace(/-/g, '.').substring(0, 16);
        const excerpt = item.content.split('\n')[0].substring(0, 200);
        return (
          <article class="feed-item">
            <header class="feed-header">
              <span class="feed-platform" style={`color:${item.color}`}>{item.platform}</span>
              <time class="feed-date" datetime={isoDate}>{displayDate}</time>
            </header>
            <div class="prose"><p>{excerpt}</p></div>
          </article>
        );
      }) : (
        <p style="color:var(--text-secondary)">æš«ç„¡å‹•æ…‹ã€‚</p>
      )}
    </div>
  </section>

  <!-- PROJECTS -->
  <section style="background:var(--bg-section)">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Projects</h2>
        <a href="/projects" class="section-link">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
      </div>
      <div class="projects-grid">
        <div class="project-card circleflow">
          <div class="project-icon" style="background:rgba(5,150,105,0.1)">â™»ï¸</div>
          <h3>CircleFlow</h3>
          <p>å¾ªç’°ç¶“æ¿Ÿçš„æ•¸æ“šåŸºç¤è¨­æ–½ï¼Œè®“è³‡æºçš„æµå‘ã€åƒ¹å€¼èˆ‡æ­¸å±¬é‡æ–°å¯è¦‹ã€å¯è¿½è¹¤ã€å¯æ²»ç†ã€‚</p>
          <div class="project-tags">
            <span class="project-tag">å¾ªç’°å†åˆ©ç”¨</span>
            <span class="project-tag">AI</span>
            <span class="project-tag">Platform</span>
          </div>
        </div>
        <div class="project-card debate">
          <div class="project-icon" style="background:rgba(37,99,235,0.1)">ğŸ§ </div>
          <h3>å¤šæ¨¡å‹èªçŸ¥å”ä½œæ¡†æ¶</h3>
          <p>ç•¶å€‹é«”å¿…é ˆåœ¨è³‡è¨Šéè¼‰ä¸­åšå‡ºåˆ¤æ–·ï¼Œä»€éº¼æ¨£çš„èªçŸ¥çµæ§‹èƒ½æä¾›æ›´å¯é çš„æ€è€ƒæ”¯æ’ã€‚</p>
          <div class="project-tags">
            <span class="project-tag">Multi-Agent</span>
            <span class="project-tag">èªçŸ¥åŸºç¤è¨­æ–½</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section class="contact-section" id="contact">
    <div class="section-container">
      <div class="contact-grid">
        <div class="contact-text">
          <h2>Let's Build<br>Something Together</h2>
          <p>ç„¡è«–ä½ æ˜¯åœ¨æ€è€ƒå¦‚ä½•è®“æŠ€è¡“å›åˆ°äººæ€§èˆ‡ç§©åºçš„å¯¦ä½œå ´æ™¯ã€æƒ³æ·±åŒ–å¾ªç’°å†ç”Ÿæœå‹™èˆ‡æ¶æ§‹å¸ƒå±€ã€æˆ–å¸Œæœ›æ¢ç´¢å°æ—¥è·¨å¢ƒåˆä½œçš„å¯èƒ½ï¼Œ<br>éƒ½æ­¡è¿ä¾†ä¿¡ä¸€èµ·å°è©±ã€æ¿€ç›ªæˆ–åˆä½œã€‚</p>
          <div class="social-links">
            <a href="https://x.com/zarqarwi" class="social-link" target="_blank">ğ• Twitter</a>
            <a href="https://www.linkedin.com/in/paulkuo" class="social-link" target="_blank">in LinkedIn</a>
            <a href="https://www.threads.net/@zarqarwi" class="social-link" target="_blank">â—‰ Threads</a>
            <a href="https://www.youtube.com/@kuopaul8265" class="social-link" target="_blank">â–¶ YouTube</a>
            <a href="https://www.facebook.com/guo.yao.lang.2025" class="social-link" target="_blank">ğŸ“˜ Facebook</a>
            <a href="https://www.instagram.com/zarqarwi" class="social-link" target="_blank">ğŸ“· Instagram</a>
            <a href="https://bsky.app/profile/paulkuo.bsky.social" class="social-link" target="_blank">ğŸ¦‹ Bluesky</a>
            <a href="https://www.reddit.com/user/Constant-Variety1656" class="social-link" target="_blank">ğŸ”´ Reddit</a>
          </div>
        </div>
        <div class="contact-form">
          <form action="mailto:paul@lasaas.com" method="post" enctype="text/plain">
            <div class="form-group">
              <label>å§“å</label>
              <input type="text" name="name" placeholder="ä½ çš„åå­—" required>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" name="email" placeholder="you@example.com" required>
            </div>
            <div class="form-group">
              <label>è¨Šæ¯</label>
              <textarea name="message" placeholder="æƒ³èŠä»€éº¼ï¼Ÿ"></textarea>
            </div>
            <button type="submit" class="btn-submit">é€å‡º</button>
          </form>
        </div>
      </div>
    </div>
  </section>

</BaseLayout>
