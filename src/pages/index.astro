---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import { PILLAR_MAP, SITE } from '../config';

const allArticles = (await getCollection('articles', ({ data }) => !data.draft && data.featured))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);

// If no featured articles yet, get latest 3
const articles = allArticles.length > 0 
  ? allArticles 
  : (await getCollection('articles', ({ data }) => !data.draft))
      .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
      .slice(0, 3);

const homeSchema = JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": `${SITE.url}/#website`,
      "url": SITE.url,
      "name": "Paul Kuo",
      "description": SITE.description,
      "inLanguage": ["zh-Hant", "en", "ja", "zh-Hans"],
      "publisher": { "@id": `${SITE.url}/#person` }
    },
    {
      "@type": "Person",
      "@id": `${SITE.url}/#person`,
      "name": SITE.author,
      "alternateName": SITE.authorAlt,
      "url": SITE.url,
      "description": SITE.description,
      "jobTitle": "Commercial Integration & AI Digital Development Director",
      "worksFor": {
        "@type": "Organization",
        "name": "SDTI 佳龍科技",
        "url": "https://www.sdti.com.tw"
      },
      "knowsAbout": ["Circular Economy", "AI", "Semiconductor", "Theology", "Startup", "Agentic SEO"],
      "sameAs": [
        "https://www.linkedin.com/in/paulkuo",
        "https://x.com/paulkuo",
        "https://www.threads.net/@zarqarwi",
        "https://www.youtube.com/@KuoPaul",
        "https://www.facebook.com/zarqarwi",
        "https://www.instagram.com/zarqarwi",
        "https://bsky.app/profile/paulkuo.bsky.social",
        "https://www.reddit.com/user/Constant-Variety1656"
      ]
    }
  ]
});
---
<BaseLayout title={SITE.title} schemaJson={homeSchema}>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner">
      <div class="hero-text">
        <h1 class="animate-in">Rebuilding <em>Order</em><br>in an Age of<br>Intelligence</h1>
        <p class="hero-tagline animate-in delay-1">從神學訓練到循環經濟，從創業現場到人工智慧——二十年來，我始終在處理同一個問題：當既有的秩序不再有效，什麼樣的結構值得被重建？</p>
        <p class="hero-tagline animate-in delay-2" style="margin-top:-20px;">技術是手段，不是目的。再生是方法，不是口號。真正的問題永遠是：在系統重組的過程中，人的判斷力、創造力與尊嚴，如何不被效率的邏輯吞噬。</p>
        <div class="hero-pillars animate-in delay-3">
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-ai)"></span><span>智能與秩序</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-circular)"></span><span>再生系統</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-faith)"></span><span>文明與人性</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-startup)"></span><span>創造與建構</span></span>
          <span class="pillar-tag"><span class="pillar-dot" style="background:var(--accent-life)"></span><span>沉思與記憶</span></span>
        </div>
        <div class="hero-actions animate-in delay-4">
          <a href="/blog" class="btn-primary">閱讀思想</a>
          <a href="/about" class="btn-secondary">認識 Paul</a>
        </div>
      </div>
      <div class="hero-visual animate-in delay-2">
        <div class="hero-card-stack">
          <div class="hero-card">
            <div class="hero-card-label" style="color:var(--accent-faith)">
              <span class="pillar-dot" style="background:var(--accent-faith)"></span> 文明與人性
            </div>
            <p>代碼之道，必須成為肉身。AI 若要達成真正的智能，其發展就必須植根於物理世界。</p>
            <div class="hero-card-meta">2025.10 · 論文</div>
          </div>
          <div class="hero-card">
            <div class="hero-card-label" style="color:var(--accent-circular)">
              <span class="pillar-dot" style="background:var(--accent-circular)"></span> 再生系統
            </div>
            <p>城市不是資源的終點，而是下一輪循環的起點。都市採礦正在改寫我們對「廢棄」的定義。</p>
            <div class="hero-card-meta">2025.12 · Medium</div>
          </div>
          <div class="hero-card">
            <div class="hero-card-label" style="color:var(--accent-ai)">
              <span class="pillar-dot" style="background:var(--accent-ai)"></span> 智能與秩序
            </div>
            <p>當 AI 開始壓縮人類的思考過程，我們面臨的不是效率問題，是認知結構的重組。</p>
            <div class="hero-card-meta">2025.11 · Medium</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- MANIFESTO -->
  <section class="manifesto">
    <div class="manifesto-inner">
      <div class="manifesto-kicker">Philosophy · 哲學宣言</div>
      <p class="manifesto-quote">"Rebuilding <em>Order</em> in an Age of Intelligence"<br>— 道成肉身</p>
      <p class="manifesto-body">基督教神學的道（Logos, 基督）必須成為肉身（Sarx,耶穌），才能真正與世界相遇。秩序也是如此——停留在概念中的秩序只是論述，唯有進入真實的產業、制度與人際關係，秩序才能被重建。技術必須落地、智能必須入世、創業要能解決人類的痛苦與慾望。無關技術樂觀主義，而是一個神學訓練出身的創業者，對「道成肉身」最務實的理解——讓秩序在混亂中重新站立，讓人的尊嚴在效率的洪流中被守住。</p>
      <a href="/blog" class="manifesto-cta">閱讀完整論述 →</a>
    </div>
  </section>

  <!-- LATEST THINKING -->
  <section class="section-container">
    <div class="section-header">
      <h2 class="section-title">Latest Thinking</h2>
      <a href="/blog" class="section-link">查看全部 →</a>
    </div>
    <div class="content-grid">
      {articles.length > 0 ? articles.map((article) => {
        const p = PILLAR_MAP[article.data.pillar];
        const dateStr = article.data.date.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit' });
        return (
          <a href={`/articles/${article.id.replace(/\.md$/, "")}`} class="content-card">
            <div class="content-card-category" style={`color:${p.color}`}>
              <span class="pillar-dot" style={`background:${p.color}`}></span> {p.label}
            </div>
            <h3>{article.data.title}</h3>
            <p>{article.data.description}</p>
            <div class="content-card-footer">
              <span>{dateStr}</span>
              {article.data.platform && <span class="platform-badge">{article.data.platform}</span>}
            </div>
          </a>
        );
      }) : (
        <>
          <div class="content-card" style="opacity:0.6; pointer-events:none;">
            <div class="content-card-category" style="color:var(--accent-faith)">
              <span class="pillar-dot" style="background:var(--accent-faith)"></span> 文明與人性
            </div>
            <h3>道成肉身之必要性：為人工智慧的具身發展提供哲學論證</h3>
            <p>AI 的核心缺陷不是技術性的，而是存有論層次的。代碼之道，必須成為肉身。</p>
            <div class="content-card-footer"><span>2025.10</span><span class="platform-badge">論文</span></div>
          </div>
          <div class="content-card" style="opacity:0.6; pointer-events:none;">
            <div class="content-card-category" style="color:var(--accent-ai)">
              <span class="pillar-dot" style="background:var(--accent-ai)"></span> 智能與秩序
            </div>
            <h3>煤礦裡的金絲雀：AI 就業衝擊的預警系統</h3>
            <p>AI 不是未來才會搶工作，它已經在搶了。問題是我們有沒有看懂哪些訊號。</p>
            <div class="content-card-footer"><span>2025.10</span><span class="platform-badge">Medium</span></div>
          </div>
          <div class="content-card" style="opacity:0.6; pointer-events:none;">
            <div class="content-card-category" style="color:var(--accent-startup)">
              <span class="pillar-dot" style="background:var(--accent-startup)"></span> 創造與建構
            </div>
            <h3>創業十二年：友情、堅持與未知的旅程</h3>
            <p>不是創業的成果讓我們有力量，而是創業精神本身有力量。</p>
            <div class="content-card-footer"><span>2023.06</span><span class="platform-badge">Facebook</span></div>
          </div>
        </>
      )}
    </div>
  </section>

  <!-- PROJECTS -->
  <section style="background:var(--bg-section)">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Projects</h2>
        <a href="/projects" class="section-link">查看全部 →</a>
      </div>
      <div class="projects-grid">
        <div class="project-card circleflow">
          <div class="project-icon" style="background:rgba(5,150,105,0.1)">♻️</div>
          <h3>CircleFlow</h3>
          <p>循環經濟的數據基礎設施，讓資源的流向、價值與歸屬重新可見、可追蹤、可治理。</p>
          <div class="project-tags">
            <span class="project-tag">再生系統</span>
            <span class="project-tag">AI</span>
            <span class="project-tag">Platform</span>
          </div>
        </div>
        <div class="project-card debate">
          <div class="project-icon" style="background:rgba(37,99,235,0.1)">🧠</div>
          <h3>多模型認知協作框架</h3>
          <p>當個體必須在資訊過載中做出判斷，什麼樣的認知結構能提供更可靠的思考支撐。</p>
          <div class="project-tags">
            <span class="project-tag">Multi-Agent</span>
            <span class="project-tag">認知基礎設施</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section class="contact-section" id="contact">
    <div class="section-container">
      <div class="contact-grid">
        <div class="contact-text">
          <h2>Let's Build<br>Something Together</h2>
          <p>無論你是在思考如何讓技術回到人性與秩序的實作場景、想深化循環再生服務與架構布局、或希望探索台日跨境合作的可能，<br>都歡迎來信一起對話、激盪或合作。</p>
          <div class="social-links">
            <a href="https://x.com/paulkuo" class="social-link" target="_blank">𝕏 Twitter</a>
            <a href="https://www.linkedin.com/in/paulkuo" class="social-link" target="_blank">in LinkedIn</a>
            <a href="https://www.threads.net/@zarqarwi" class="social-link" target="_blank">◉ Threads</a>
            <a href="https://www.youtube.com/@KuoPaul" class="social-link" target="_blank">▶ YouTube</a>
            <a href="https://www.facebook.com/zarqarwi" class="social-link" target="_blank">📘 Facebook</a>
            <a href="https://www.instagram.com/zarqarwi" class="social-link" target="_blank">📷 Instagram</a>
            <a href="https://bsky.app/profile/paulkuo.bsky.social" class="social-link" target="_blank">🦋 Bluesky</a>
            <a href="https://www.reddit.com/user/Constant-Variety1656" class="social-link" target="_blank">🔴 Reddit</a>
          </div>
        </div>
        <div class="contact-form">
          <form action="mailto:paul@lasaas.com" method="post" enctype="text/plain">
            <div class="form-group">
              <label>姓名</label>
              <input type="text" name="name" placeholder="你的名字" required>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" name="email" placeholder="you@example.com" required>
            </div>
            <div class="form-group">
              <label>訊息</label>
              <textarea name="message" placeholder="想聊什麼？"></textarea>
            </div>
            <button type="submit" class="btn-submit">送出</button>
          </form>
        </div>
      </div>
    </div>
  </section>

</BaseLayout>
