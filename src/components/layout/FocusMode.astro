---
/**
 * FocusMode ‚Äì floating button that hides nav/ticker/footer for distraction-free reading.
 * Only rendered on article pages (controlled by parent).
 */
---

<button class="focus-mode-btn" id="focusModeBtn" title="Â∞àÊ≥®Èñ±ËÆÄ" aria-label="Focus Mode" style="display:none">
  <span class="focus-icon">üëÅ</span>
</button>

<script is:inline>
(function() {
  var btn = document.getElementById('focusModeBtn'); if (!btn) return;
  var isArticle = !!document.querySelector('.article-page, .article-content'); if (!isArticle) return;
  btn.style.display = 'flex';
  var active = false;
  btn.addEventListener('click', function() {
    active = !active;
    var nav = document.getElementById('main-nav'); var ticker = document.querySelector('.cost-ticker'); var footer = document.querySelector('footer');
    if (active) {
      document.body.classList.add('focus-mode');
      if (nav) nav.style.transform = 'translateY(-100%)'; if (ticker) { ticker.style.transform = 'translateY(-100%)'; ticker.style.opacity = '0'; }
      if (footer) footer.style.display = 'none';
      btn.querySelector('.focus-icon').textContent = '‚úï'; btn.title = 'ÁµêÊùüÂ∞àÊ≥®';
      document.body.style.paddingTop = '0';
      var content = document.querySelector('.article-content, .article-page'); if (content) content.style.paddingTop = '40px';
    } else {
      document.body.classList.remove('focus-mode');
      if (nav) nav.style.transform = ''; if (ticker) { ticker.style.transform = ''; ticker.style.opacity = ''; }
      if (footer) footer.style.display = '';
      btn.querySelector('.focus-icon').textContent = 'üëÅ'; btn.title = 'Â∞àÊ≥®Èñ±ËÆÄ';
      document.body.style.paddingTop = '';
      var content = document.querySelector('.article-content, .article-page'); if (content) content.style.paddingTop = '';
    }
  });
})();
</script>
